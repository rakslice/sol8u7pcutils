diff '--exclude=.deps' '--exclude=*.log' -ur libffi-3.2.1.orig/src/closures.c libffi-3.2.1/src/closures.c
--- libffi-3.2.1.orig/src/closures.c	2018-09-30 14:51:47.930024000 -0700
+++ libffi-3.2.1/src/closures.c	2018-09-30 14:52:10.750013000 -0700
@@ -473,7 +473,7 @@
   if (ftruncate (execfd, offset + length))
     return MFAIL;
 
-  flags &= ~(MAP_PRIVATE | MAP_ANONYMOUS);
+  flags &= ~(MAP_PRIVATE /*| MAP_ANONYMOUS*/);
   flags |= MAP_SHARED;
 
   ptr = mmap (NULL, length, (prot & ~PROT_WRITE) | PROT_EXEC,
@@ -518,7 +518,7 @@
 
   assert (start == NULL && length % malloc_getpagesize == 0
 	  && prot == (PROT_READ | PROT_WRITE)
-	  && flags == (MAP_PRIVATE | MAP_ANONYMOUS)
+	  && flags == (MAP_PRIVATE /*| MAP_ANONYMOUS*/)
 	  && fd == -1 && offset == 0);
 
 #if FFI_CLOSURE_TEST
